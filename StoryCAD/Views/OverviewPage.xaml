<Page NavigationCacheMode="Required"
      x:Class="StoryCAD.Views.OverviewPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:usercontrols="using:StoryCADLib.Controls">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <TextBox Header="Title" Text="{x:Bind OverviewVm.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                 Margin="10,10,10,0" />
        <TabView Grid.Row="1" TabWidthMode="Equal" CanDragTabs="False" CanReorderTabs="False" IsAddTabButtonVisible="False">

            <TabView.TabItems>
                <TabViewItem Header="Story Idea" IsClosable="False">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>  <!-- Author -->
                        <RowDefinition Height="Auto"/>  <!-- Dates -->
                        <RowDefinition Height="*"/>     <!-- Story Idea textbox fills remaining space -->
                    </Grid.RowDefinitions>

                    <TextBox Grid.Row="0"
                             Header="Author"
                             Text="{x:Bind OverviewVm.Author, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

                    <Grid Grid.Row="1" ColumnSpacing="12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBox Grid.Column="0" Header="Date Created"
                                 Text="{x:Bind OverviewVm.DateCreated, Mode=TwoWay}"/>
                        <TextBox Grid.Column="1" Header="Last Changed"
                                 Text="{x:Bind OverviewVm.DateModified, Mode=TwoWay}"/>
                    </Grid>

                    <!-- Testing plain TextBox to diagnose Mac wrapping issue -->
                    <!--<usercontrols:RichEditBoxExtended Header="Story Idea" Grid.Row="2"
                                                                              RtfText="{x:Bind OverviewVm.Description, Mode=TwoWay}"
                                                                              TextWrapping="Wrap"
                                                                              AcceptsReturn="True"
                                                                              IsSpellCheckEnabled="True"
                                                                              ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                                              PlaceholderText="Record whatever idea or incident made you think 'story'." />-->
                    <TextBox Header="Story Idea" Grid.Row="2"
                             Text="{x:Bind OverviewVm.Description, Mode=TwoWay}"
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             IsSpellCheckEnabled="True"
                             ScrollViewer.VerticalScrollBarVisibility="Auto"
                             PlaceholderText="Record whatever idea or incident made you think 'story'." />
                </Grid>
                </TabViewItem>

                <TabViewItem Header="Concept" IsClosable="False">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <usercontrols:RichEditBoxExtended Grid.Row="0"
                                                      Header="Concept"
                                                      RtfText="{x:Bind OverviewVm.Concept, Mode=TwoWay}"
                                                      AcceptsReturn="True"
                                                      IsSpellCheckEnabled="True"
                                                      TextWrapping="Wrap"
                                                      ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                      PlaceholderText="Use 'What if?' and 'What happens is' to flesh out your idea." />
                </Grid>
                </TabViewItem>

                <TabViewItem Header="Premise" IsClosable="False">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <ComboBox Grid.Row="0"
                              Header="Story Problem"
                              IsEditable="False"
                              MinWidth="300"
                              DisplayMemberPath="Name"
                              SelectedItem="{x:Bind OverviewVm.SelectedProblem, Mode=TwoWay}"
                              ItemsSource="{x:Bind OverviewVm.Problems, Mode=OneWay}" />
                    <usercontrols:RichEditBoxExtended Grid.Row="1"
                                                      Header="Premise"
                                                      Margin="0,10,0,0"
                                                      RtfText="{x:Bind OverviewVm.Premise, Mode=TwoWay}"
                                                      AcceptsReturn="True"
                                                      IsSpellCheckEnabled="True"
                                                      TextWrapping="Wrap"
                                                      ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                      PlaceholderText="A [character] in a situation [genre, setting] wants something [goal], which brings him into [conflict] with a second character [opposition]. After [a series of conflicts], the [final battle] erupts, and [the protagonist] finally [resolves] the conflict." />
                </Grid>
                </TabViewItem>

                <TabViewItem Header="Structure" IsClosable="False">
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <Grid Grid.Row="0" HorizontalAlignment="Stretch">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="2*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="2*" />
                            </Grid.ColumnDefinitions>
                            <ComboBox Header="Type" Grid.Column="0" IsEditable="False" MinWidth="0" Margin="0,0,20,0"
                                      ItemsSource="{x:Bind OverviewVm.StoryTypeList}"
                                      SelectedItem="{x:Bind OverviewVm.StoryType, Mode=TwoWay}" />
                            <ComboBox Header="Genre" Grid.Column="2" IsEditable="False" MinWidth="0"
                                      ItemsSource="{x:Bind OverviewVm.GenreList}"
                                      SelectedItem="{x:Bind OverviewVm.StoryGenre, Mode=TwoWay}" />
                        </Grid>
                        <Grid Grid.Row="1" HorizontalAlignment="Stretch">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="2*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="2*" />
                            </Grid.ColumnDefinitions>
                            <ComboBox Header="Viewpoint" Grid.Column="0" IsEditable="False" MinWidth="0"
                                      Margin="0,0,20,0"
                                      ItemsSource="{x:Bind OverviewVm.ViewpointList}"
                                      SelectedItem="{x:Bind OverviewVm.Viewpoint, Mode=TwoWay}" BorderThickness="1" />
                            <ComboBox Header="Literary Technique" IsEditable="False" Grid.Column="2" MinWidth="0"
                                      ItemsSource="{x:Bind OverviewVm.LiteraryTechniqueList}"
                                      SelectedItem="{x:Bind OverviewVm.LiteraryTechnique, Mode=TwoWay}" />
                        </Grid>
                        <ComboBox Header="Viewpoint Character" Grid.Row="2" IsEditable="False" MinWidth="300"
                                  DisplayMemberPath="Name"
                                  SelectedItem="{x:Bind OverviewVm.SelectedViewpointCharacter, Mode=TwoWay}"
                                  ItemsSource="{x:Bind OverviewVm.Characters, Mode=OneWay}" />
                        <Grid Grid.Row="3" HorizontalAlignment="Stretch">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="2*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="2*" />
                            </Grid.ColumnDefinitions>
                            <ComboBox Header="Voice" Grid.Column="0" IsEditable="False" MinWidth="0" Margin="0,0,20,0"
                                      ItemsSource="{x:Bind OverviewVm.VoiceList}"
                                      SelectedItem="{x:Bind OverviewVm.Voice, Mode=TwoWay}" />
                            <ComboBox Header="Tense" Grid.Column="2" IsEditable="False" MinWidth="0"
                                      ItemsSource="{x:Bind OverviewVm.TenseList}"
                                      SelectedItem="{x:Bind OverviewVm.Tense, Mode=TwoWay}" />
                        </Grid>
                        <Grid Grid.Row="4" HorizontalAlignment="Stretch">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="2*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="2*" />
                            </Grid.ColumnDefinitions>
                            <ComboBox Header="Style" Grid.Column="0" IsEditable="False" MinWidth="0" Margin="0,0,20,0"
                                      ItemsSource="{x:Bind OverviewVm.StyleList}"
                                      SelectedItem="{x:Bind OverviewVm.Style, Mode=TwoWay}" />
                            <ComboBox Header="Tone" Grid.Column="2" IsEditable="False" MinWidth="0"
                                      ItemsSource="{x:Bind OverviewVm.ToneList}"
                                      SelectedItem="{x:Bind OverviewVm.Tone, Mode=TwoWay}" />
                        </Grid>
                        <usercontrols:RichEditBoxExtended Header="Structure Notes" Grid.Row="5"
                                                          RtfText="{x:Bind OverviewVm.StructureNotes, Mode=TwoWay}"
                                                          AcceptsReturn="True"
                                                          IsSpellCheckEnabled="True" TextWrapping="Wrap"
                                                          ScrollViewer.VerticalScrollBarVisibility="Visible" />
                    </Grid>
                </ScrollViewer>
                </TabViewItem>

                <TabViewItem Header="Notes" IsClosable="False">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <usercontrols:RichEditBoxExtended Grid.Row="0"
                                                      Header="Notes"
                                                      RtfText="{x:Bind OverviewVm.Notes, Mode=TwoWay}"
                                                      AcceptsReturn="True"
                                                      IsSpellCheckEnabled="True"
                                                      TextWrapping="Wrap"
                                                      ScrollViewer.VerticalScrollBarVisibility="Visible" />
                </Grid>
                </TabViewItem>
            </TabView.TabItems>
        </TabView>
    </Grid>
</Page>
